"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getEntryFile = void 0;
const path_1 = require("path");
const normalize_path_js_1 = require("./normalize_path.js");
const getEntryFileContents = (mainPath, moduleFormat) => {
    const importPath = `.${mainPath.startsWith('/') ? mainPath : `/${mainPath}`}`;
    if (moduleFormat === 'cjs') {
        return `module.exports = require('${importPath}')`;
    }
    return `export { handler } from '${importPath}'`;
};
const getEntryFile = ({ commonPrefix, filename, mainFile, moduleFormat, userNamespace, }) => {
    const mainPath = (0, normalize_path_js_1.normalizeFilePath)({ commonPrefix, path: mainFile, userNamespace });
    const extension = (0, path_1.extname)(filename);
    const entryFilename = `${(0, path_1.basename)(filename, extension)}.js`;
    const contents = getEntryFileContents(mainPath, moduleFormat);
    return {
        contents,
        filename: entryFilename,
    };
};
exports.getEntryFile = getEntryFile;
//# sourceMappingURL=entry_file.js.map