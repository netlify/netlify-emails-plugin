"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.detectEsModule = void 0;
const fs_1 = require("fs");
const es_module_lexer_1 = require("es-module-lexer");
const detectEsModule = async ({ mainFile }) => {
    if (!mainFile) {
        return false;
    }
    try {
        const [mainFileContents] = await Promise.all([fs_1.promises.readFile(mainFile, 'utf8'), es_module_lexer_1.init]);
        const [imports, exports] = (0, es_module_lexer_1.parse)(mainFileContents);
        return imports.length !== 0 || exports.length !== 0;
    }
    catch {
        // If there are any problems with init or parsing, assume it's not an ES module
        return false;
    }
};
exports.detectEsModule = detectEsModule;
//# sourceMappingURL=detect_es_module.js.map